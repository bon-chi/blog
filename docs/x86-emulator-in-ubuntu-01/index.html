<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>bon-chi</title>

      <!-- CSS -->
      <link rel="stylesheet" href="https:&#x2F;&#x2F;bon-chi.github.io&#x2F;blog&#x2F;print.css" media="print">
      <link rel="stylesheet" href="https:&#x2F;&#x2F;bon-chi.github.io&#x2F;blog&#x2F;poole.css">
      <link rel="stylesheet" href="https:&#x2F;&#x2F;bon-chi.github.io&#x2F;blog&#x2F;hyde.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

      

      
      
    </head>

    <body class="theme-base-0c ">
        
            <div class="sidebar">
                <div class="container sidebar-sticky">
                    <div class="sidebar-about">
                        
                            <a href="https:&#x2F;&#x2F;bon-chi.github.io&#x2F;blog&#x2F;"><h1>bon-chi</h1></a>
                            
                            <p class="lead">bon-chi&#x27;s web log</p>
                            
                        
                    </div>

                    <ul class="sidebar-nav">
                        
                        
                        
                    </ul>
                </div>
            </div>
        

        <div class="content container">
            
<div class="post">
  <h1 class="post-title">è‡ªä½œã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å­¦ã¶x86ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒå‹•ãä»•çµ„ã¿ã‚’å¾¹åº•ç†è§£ï¼ã‚’ubuntuã§é€²ã‚ã‚‹</h1>
  <span class="post-date">2018-05-27</span>
  <ul>
    
        <li>
            <a href="https://bon-chi.github.io/blog/x86-emulator-in-ubuntu-01/#chapter1">Chapter1</a>
            
                <ul>
                    
                        <li>
                            <a href="https://bon-chi.github.io/blog/x86-emulator-in-ubuntu-01/#1-3">1.3</a>
                        </li>
                    
                </ul>
            
        </li>
    
        <li>
            <a href="https://bon-chi.github.io/blog/x86-emulator-in-ubuntu-01/#chapter2">Chapter2</a>
            
                <ul>
                    
                        <li>
                            <a href="https://bon-chi.github.io/blog/x86-emulator-in-ubuntu-01/#2-3">2.3</a>
                        </li>
                    
                </ul>
            
        </li>
    
        <li>
            <a href="https://bon-chi.github.io/blog/x86-emulator-in-ubuntu-01/#chapter3">Chapter3</a>
            
                <ul>
                    
                        <li>
                            <a href="https://bon-chi.github.io/blog/x86-emulator-in-ubuntu-01/#3-2-3-4">3.2, 3.4</a>
                        </li>
                    
                </ul>
            
        </li>
    
  </ul>
  <p>OS: ubuntu16.04
gcc: (Ubuntu/Linaro 6.3.0-18ubuntu2~16.04) 6.3.0 20170519</p>
<h2 id="chapter1"><a class="gutenberg-anchor" href="#chapter1" aria-label="Anchor link for: chapter1">ğŸ”—</a>
Chapter1</h2>
<h3 id="1-3"><a class="gutenberg-anchor" href="#1-3" aria-label="Anchor link for: 1-3">ğŸ”—</a>
1.3</h3>
<p>gccã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹</p>
<pre><code>gcc -Wl,--entry=func,--oformat=binary -nostdlib -fno-asynchronous-unwind-tables -m32 -o casm-c-sample.bin casm-c-sample.c
</code></pre>
<p>ndisasmã¯apt-getã§nasmã‚’installã™ã‚‹ã¨ä¸€ç·’ã«å…¥ã£ã¦ãã‚‹</p>
<pre><code>sudo apt-get install nasm
</code></pre>
<h2 id="chapter2"><a class="gutenberg-anchor" href="#chapter2" aria-label="Anchor link for: chapter2">ğŸ”—</a>
Chapter2</h2>
<h3 id="2-3"><a class="gutenberg-anchor" href="#2-3" aria-label="Anchor link for: 2-3">ğŸ”—</a>
2.3</h3>
<p><code>emu2.3</code>ã®Makefileã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</p>
<ul>
<li><code>TARGET</code>ã¯<code>.exe</code>ã§ã‚ã‚‹å¿…è¦ãŒãªã„ã®ã§ã€<code>TARGET = px86</code></li>
<li><code>CC</code>ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«åˆ©ç”¨ã™ã‚‹gccã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚æ›¸ç±ã ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰å†…ã«ã‚ã‚‹gccã‚’ä½¿ã†ãŒãã‚Œã¯windowç”¨ãªã®ã§ã€ubuntuã«installã•ã‚Œã¦ã„ã‚‹gccã‚’ä½¿ã†ã€‚<code>CC = gcc</code></li>
<li><code>CC</code>ã§<code>Z_TOOLS</code>ã‚’å‚ç…§ã—ãªããªã£ãŸã®ã§ã€<code>Z_TOOLS</code>ã‚’å‰Šé™¤ã™ã‚‹</li>
</ul>
<p>æœ€çµ‚çš„ã«<code>Makefile</code>ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹</p>
<pre><code>TARGET = px86
OBJS = main.o

CC = gcc
CFLAGS += -Wall

.PHONY: all
all :
    make $(TARGET)

%.o : %.c Makefile
    $(CC) $(CFLAGS) -c $&lt;

$(TARGET) : $(OBJS) Makefile
    $(CC) -o $@ $(OBJS)
</code></pre>
<h2 id="chapter3"><a class="gutenberg-anchor" href="#chapter3" aria-label="Anchor link for: chapter3">ğŸ”—</a>
Chapter3</h2>
<h3 id="3-2-3-4"><a class="gutenberg-anchor" href="#3-2-3-4" aria-label="Anchor link for: 3-2-3-4">ğŸ”—</a>
3.2, 3.4</h3>
<p><code>Makefile</code>ã‚’Chapter2ã¨åŒæ§˜ã«ä¿®æ­£ã™ã‚‹</p>

</div>

        </div>

    </body>

</html>
